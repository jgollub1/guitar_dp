<!DOCTYPE html>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="static/css/animate.min.css">
        <link href="static/css/style_guitar.less" rel="stylesheet/less" type="text/stylesheet"/> <!-- can remove this to speed up page load...-->
        <script type="module" src="static/js/less.js" type="text/javascript"></script>
        <link rel="stylesheet" href="../static/codeMirrorBindings/codemirror.css">
        <link rel="stylesheet" href="../static/codeMirrorBindings/foldgutter.css">
        <link rel="stylesheet" href="../static/codeMirrorBindings/dialog.css">
        <link rel="stylesheet" href="../static/codeMirrorBindings/monokai.css">
        <script src="../static/codeMirrorBindings/codemirror.js"></script>
        <script src="../static/codeMirrorBindings/searchcursor.js"></script>
        <script src="../static/codeMirrorBindings/search.js"></script>
        <script src="../static/codeMirrorBindings/dialog.js"></script>
        <script src="../static/codeMirrorBindings/matchbrackets.js"></script>
        <script src="../static/codeMirrorBindings/closebrackets.js"></script>
        <script src="../static/codeMirrorBindings/comment.js"></script>
        <script src="../static/codeMirrorBindings/hardwrap.js"></script>
        <script src="../static/codeMirrorBindings/foldcode.js"></script>
        <script src="../static/codeMirrorBindings/brace-fold.js"></script>
        <script src="../static/codeMirrorBindings/javascript.js"></script>
        <script src="../static/codeMirrorBindings/python.js"></script>
        <script src="../static/codeMirrorBindings/sublime.js"></script>
        <style type="text/css">
          .CodeMirror {border-top: 1px solid #eee; border-bottom: 1px solid #eee; line-height: 1.3; height: 500px}
          .CodeMirror-linenumbers { padding: 0 8px; }
        </style>
        

    </head>

    <body>
        <div class="guitar-neck">
            <div class="fret first"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>
            <div class="fret"></div>    

            <ul class="dots">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
            <ul class="strings">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>

            <ul class="open-notes">
                <li class="low-e">E1</li>
                <li class="a">B</li>
                <li class="d">G</li>
                <li class="g">D</li>
                <li class="b">A</li>
                <li class="high-e">E2</li>
            </ul>
            <div class="notes">
                <div class="mask low-e"><ul></ul></div>
                <div class="mask a"><ul></ul></div>
                <div class="mask d"><ul></ul></div>
                <div class="mask g"><ul></ul></div>
                <div class="mask b"><ul></ul></div>
                <div class="mask high-e"><ul></ul></div>
            </div>
        </div>

        <h1 class="animated bounce delay-.5s">ðŸŽ¸ MIDI Guitar Hero</h1>
        <div class="container">
                <div class="row">
                    <div class="twelve columns">
                        <input id="tab1" type="radio" name="tabs" style="display: none" checked>
                        <label for="tab1">File Input</label>
                        
                        <input id="tab2" type="radio" name="tabs" style="display: none">
                        <label for="tab2">Developer</label>

                        <section id="content1">
                            <p id="description">Upload a MIDI file of your favorite melody. This solver uses a dynamic programming algorithm to compute a corresponding path across the fretboard. Adapted from Miguel Grinberg's <a href="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world">flask tutorial</a>, <a href="https://github.com/grimmdude/MidiPlayerJS">MidiPlayerJS</a>, <a href="https://codepen.io/DreySkee/pen/bddpqM">Guitar Fretboard Visualization</a>, and <a href="https://codepen.io/oknoblich/pen/tfjFl">Responsive CSS Tabs</a>.</p>
                            <h4>Choose a Midi File</h4>
                            <p id="select-file">
                                <input type="file" onchange="loadFile()" onclick="Player.stop()" />
                            </p>
                            <p id="loading">Loading soundfont...</p>
                            <div class="play-bar-wrapper">
                                <div id="play-bar"></div>
                            </div>
                            <p>
                                <button class="button button-primary" id="play-button" onclick="Player.isPlaying() ? pause() : play();" disabled="disabled">Play</button>
                                <button class="button" onclick="Player.stop()">Stop</button>
                            </p>
                            
                            <h4>Tempo</h4>
                            <p id="wrapper">
                                <input id="test" type="range" min="50" max="200" value="100" onchange="changeTempo(this.value)" style="width:200px;" />
                            </p>
                            <p style="margin-top: 2%;">
                                Tempo: <span id="tempo-display"></span> bpm<br />
                                <input style="margin-top: 1%;" type="range" onchange="Player.pause();Player.setTempo(this.value);Player.play()" min="50" max="200">
                                <br />
                                <br />
                                MIDI File Format: <span id="file-format-display"></span>
                            </p>
                            <div id="events" class="well" style="margin-top: 1%;"></div>
                        </section>

                        <section id="content2">
                            <article>

                            <p style="width:70%">As referenced in 
                            <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-fall-2011/lecture-videos/MIT6_006F11_lec22.pdf">introductory algorithms courses</a>
                            , we may compute a melody's optimal path across the fretboard
                            with dynamic programming. To make this approach effective, we must form an appropriate cost function. Once specified, the solver outputs a path across the 
                            fretboard with the lowest total cost according to compute_cost().
                            </p>
                            <ul style="list-style-type:disk">
                                <li>Input consists of two sequential notes</li>
                                <li>each note takes the form (string, fret, finger)</li>
                            </ul>

                            <script>
                                var value = "'''\nImplement the cost function\n'''\n";
                                value += "def compute_cost(tup1, tup2):\n";
                                value += "\tstring1, fret1, finger1 = tup1\n";
                                value += "\tstring2, fret2, finger2 = tup2\n";
                                value += "\texpected_fret = fret1 + (finger2 - finger1)\n";
                                value += "\treturn (fret2 - expected_fret)**2\n";
                                var editor = CodeMirror(document.body.getElementsByTagName("article")[0], {
                                    value: value,
                                    lineNumbers: true,
                                    mode: "python",
                                    keyMap: "sublime",
                                    autoCloseBrackets: true,
                                    matchBrackets: true,
                                    showCursorWhenSelecting: true,
                                    theme: "monokai",
                                    tabSize: 2
                                });
                            </script>




                        </section>
                        <p style="margin-top: 1%;">By <a href="//gollub.me">Jacob Gollub</a></p>
                    </div>
                </div>
            </div> 

        <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
        <script src="../static/lib/midiplayer.min.js"></script>
        <script src="../static/lib/soundfont-player.min.js"></script>
        <script src="../static/lib/app.js"></script>
        <script src="../static/js/index_guitar.js"></script>
        <script>
            var sequence = [{{ ', '.join(sequence) }}];
        </script>
    </body>
</html>